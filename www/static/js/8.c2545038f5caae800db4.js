webpackJsonp([8],{MiRu:function(t,e){},xUZI:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("7+uW"),s("NYxO"),s("GQaK");var i=s("U7mS"),a=s.n(i),o=s("V11h"),n=s.n(o),c={data:function(){return{issumbit:!1,phoneMess:"获取",times:30,phonecode:null,account:"",icon_photo:n.a,to_icon_photo:"",has_img:!1}},created:function(){var t=this;this.$store.state.isShowheader=!0,this.$store.state.isback=1,this.$store.state.headertitle="收款方式";var e=this.$store.state.httpurl+"wap/payment_type/getPaymentType";this.$loading.open("loading..."),this.$http.get(e).then(function(e){"y"==e.data.status&&(t.account=e.data.info.account,t.icon_photo=t.$store.state.httpurl+"public/wap/"+e.data.info.payment_img,t.has_img=!0),t.$loading.close()}).catch(function(e){t.$loading.close(),t.$toast.center("连接超时")})},watch:{phonecode:function(t,e){4==t.length&&this.selectDost()}},computed:{},methods:{upload:function(t){var e=this,s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("style","visibility:hidden"),s.setAttribute("accept","image/*"),document.body.appendChild(s),s.click(),s.onchange=function(){return e.uploadFile(t,s.files[0],function(t){s.remove()})}},uploadFile:function(t,e,s){var i=this;a()(e,{width:360}).then(function(t){i.$loading.open("loading...");var e=i.$store.state.httpurl+"wap/index/uploadImg";i.$http.post(e,t.formData).then(function(t){i.icon_photo=i.$store.state.httpurl+"public/wap/"+t.data,i.to_icon_photo=t.data,i.has_img=!0,i.$loading.close()}).catch(function(t){i.$loading.close(),i.$toast.center("连接超时")})})},selectDost:function(){var t=this,e=this.$store.state.httpurl+"wap/login/checkVerify?value="+this.phonecode+"&type=2";this.$http.post(e).then(function(e){"y"==e.data.status?t.issumbit=!0:(t.$toast.center(e.data.msg),t.issumbit=!1)}).catch(function(e){t.issumbit=!1})},submitPayment:function(){var t=this;if(0!=this.issumbit)if(""!=this.account)if(""!=this.to_icon_photo){this.$loading.open("loading...");var e=this.$store.state.httpurl+"wap/payment_type/addPaymentType",s="prove_img="+this.to_icon_photo+"&account="+this.account;this.$http.post(e,s).then(function(e){"y"==e.data.status&&t.$router.push({path:"/"}),t.$toast.center(e.data.info),t.$loading.close()}).catch(function(e){t.$loading.close(),t.$toast.center("连接超时")})}else this.$toast.center("请上传图片");else this.$toast.center("请填写正确的信息")},postmess:function(){var t=this;if(!this.isclick){this.setTimes();var e=this.$store.state.httpurl+"wap/login/smsSend";this.$http.post(e).then(function(e){"y"==e.data.status&&t.$toast.center(e.data.msg),t.infocont=e.data}).catch(function(e){t.$toast.center("连接超时")})}},setTimes:function(){var t=this;this.$store.state.Timeout=setInterval(function(){t.times>0?(t.times--,t.phoneMess="过"+t.times+"可重新获取",t.isclick=!0):(t.times=30,clearInterval(t.$store.state.Timeout),t.isclick=!1,t.phoneMess="获取验证码")},1e3)}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"refScrolldiv payment marginHeader"},[s("div",[s("div",{staticClass:"paymentForm"},[t._m(0),t._v(" "),s("div",{staticClass:"paymentFormItem"},[s("div",{staticClass:"label"},[t._v("账号")]),t._v(" "),s("div",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"text",value:"",placeholder:"请输入微信或支付宝收款账号"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"paymentFormItem upload",on:{click:function(e){t.upload()}}},[s("div",{staticClass:"paymentFormItem_1"},[s("div",{staticClass:"paymentFormItem_1_img"},[s("img",{class:{has_img:t.has_img},attrs:{src:t.icon_photo}})])]),t._v(" "),s("div",{staticClass:"paymentFormItem_2"},[t._v("\n                    点击上传收款二维码\n                ")])]),t._v(" "),s("div",{staticClass:"paymentFormItem"},[s("div",{staticClass:"label"},[t._v("验证码")]),t._v(" "),s("div",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phonecode,expression:"phonecode"}],attrs:{type:"text",value:"",placeholder:"请输入短信验证码"},domProps:{value:t.phonecode},on:{input:function(e){e.target.composing||(t.phonecode=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"code",class:6==t.times?"blueTest":"redTest",on:{click:t.postmess}},[t._v(t._s(t.phoneMess))])]),t._v(" "),s("div",{class:{submitBtn:!0,actpost:t.issumbit},on:{click:function(e){t.submitPayment()}}},[t._v("保存")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"paymentFormItem"},[e("div",{staticClass:"label"},[this._v("收款渠道")]),this._v(" "),e("div",{staticClass:"input"},[this._v("微信或支付宝")])])}]};var u=s("VU/8")(c,l,!1,function(t){s("MiRu")},"data-v-bcd07b1e",null);e.default=u.exports}});